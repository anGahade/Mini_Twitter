{% extends 'base.html' %}

{% block content %}

<div class="container mt-5">

  <h1>{{ title }}</h1>

  {% for post in posts %}

  <div class="border rounded p-3 mb-4">

    <h3>{{ post.title }}</h3>

    <p>Автор: {{ post.user }}</p>

    <p>{{ post.content }}</p>

    <p class="text-muted">
      Створено: {{ post.created_at }}
    </p>

    <div class="mt-3 d-flex align-items-center justify-content-between">
      <a href="{% url 'posts:post_detail' pk=post.pk %}" class="btn btn-outline-info my-2 my-sm-0">View Post</a>
      <a href="{% url 'comments:comment_list' pk=post.pk %}" class="btn btn-outline-info my-2 my-sm-0">
      Comments ({{ post.get_comment_count }})
      </a>

      <form method="post" action="{% url 'posts:like_post' pk=post.pk %}">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger btn-sm like-button">
          <i class="fas fa-heart"></i> Лайк
        </button>
      </form>
      <span class="like-count badge bg-danger text-white">{{ post.likes.count }}</span>
    </div>

  </div>

  {% endfor %}

</div>

{% endblock %}
